{{define "title"}}{{.PageContext.ShortName}} | Schedule | {{week (index .PageData.Schedule.Dates 0)}}{{end}}
{{define "content"}}
{{with .PageData}}

<div class="container-fluid header-large current-next mobile-shrink">
  <div class="container">
      <div class="row justify-content-center">
        <div class="col-11 col-md-10 box-shadow-1 mobile-hide">
          {{template "current_and_next" .}}
        </div>
        <div class="col-11 col-md-10 text-center mobile-only">
          <h1 class="display-3">Schedule</h1>
          <h5 class="display-5">{{week (index .Schedule.Dates 0)}}</h5>
        </div>
      </div>
    </div>
</div>

<!-- schedule header -->
<div class="container-fluid bg-off-white">
  <div class="container p-3">
    <div class="row">
      <div class="col-12 col-lg-6">
        <h1 class="display-4 mobile-hide">Schedule</h1>
        <h5 class="muted mobile-hide">for {{week (index .Schedule.Dates 0)}}</h5>
      </div>
      <div class="col-12 col-lg-6 justify-content-end">
        <div class="schedule-keys">
          <div class="key-row">
            <span class="h5">Key: </span>
            <span class="schedule-keys-flagship">Flagship</span>
            <span class="schedule-keys-event">Events</span>
            <span class="schedule-keys-specialist-music">Specialist Music</span>
          </div>
          <div class="key-row">
            <span class="h6">Team Content: </span>
            <span class="schedule-keys-news">News</span>
            <span class="schedule-keys-speech">Speech</span>
            <span class="schedule-keys-music">Music</span>
          </div>
        </div>
      </div>
    </div>

    <nav aria-label="Related Schedules" class="row nav justify-content-between">
      {{if .PrevURL}}
        <a class="nav-link" href="{{url .PrevURL.Path}}">Previous week</a>
      {{end}}
      {{if .CurrURL}}
        <a class="nav-link" href="{{url .CurrURL.Path}}">Permalink</a>
      {{end}}
      {{if .NextURL}}
        <a class="nav-link" href="{{url .NextURL.Path}}">Next week</a>
      {{end}}
    </nav>
  </div>
</div>

<!-- schedule body -->
<div class="container-fluid bg-off-white">
  <div class="container">
  {{with .Schedule}}
  {{if .Table}}
    <div class="tables-container table">
      <table class="schedule-table mobile-hide row-headers">
        <colgroup>
          <col class="mobile-hide time-col">
        </colgroup>
        <tr class="col-headers"></tr>
        {{with index .Table 0}}
          {{range .Cells}}
            <tr>
              <td class="time-header">{{.Hour | printf "%02d"}}:{{.Minute | printf "%02d"}}</td>
            </tr>
          {{end}}
        {{end}}
      </table>
      {{range .Table}}
        <table class="schedule-table">
          <colgroup>
            <col class="mobile-only time-col">
          </colgroup>
          <tr class="col-headers">
            <th class="day-header" colspan=2>{{.Day.Weekday}}&nbsp;{{.Day.Format "02"}}</th>
          </tr>
          {{range .Cells}}
            <tr>
              <td class="time-header mobile-only">{{.Hour | printf "%02d"}}:{{.Minute | printf "%02d"}}</td>
              {{if ne .RowSpan 0}}
              <td rowspan="{{.RowSpan}}" class="schedule-timeslot schedule-blocks-{{.Item.Block}}" title="{{stripHTML .Item.Desc}}"
                  {{if .Item.PageURL}} onclick="window.location.href='{{url .Item.PageURL}}'" {{end}} >
                {{if .Item.PageURL}}
                  <a href="{{url .Item.PageURL}}" >{{.Item.Name}}</a>
                {{else}}
                  <p>{{.Item.Name}}</p>
                {{end}}
              </td>
              {{end}}
            </tr>
          {{end}}
        </table>
      {{end}}
    </div>
  {{else}}
    <div class="row justify-content-center p-5">
      <div class="col-12 col-lg-8 p-5 text-center schedule-blocks-regular">
        <h3>There's nothing on for this week.</p>
        <h4>We're most likely off air, or we haven't scheduled it yet!</h4>
      </div>
    </div>
  {{end}}
  </div>
</div>

{{end}}
{{end}}
{{end}}

