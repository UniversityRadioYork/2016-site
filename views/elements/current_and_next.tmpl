{{define "current_and_next"}}
{{with .CurrentAndNext}}
<div class="current-and-next row justify-content-center">
  {{if .Current}}
  <div class="col-4 col-md-2 p-0 current-and-next-img">
    <img src="
    {{if .Current.Photo}}
      //ury.org.uk{{.Current.Photo}}
    {{else}}
      {{url "/images/show-current.png"}}
    {{end}}
    " alt="{{.Current.Title}} Photo" />
    <a href="https://ury.org.uk/listen" class="btn btn-red listen-btn mobile-hide px-0" title="Listen Live" onclick="window.open('http://ury.org.uk/live', 'radioplayer', 'height=665,width=380'); return false;">Listen Live</a>
  </div>
  <div class="col-8 col-md-5 p-0 m-0">
    {{if .Current.Url}}
    <a class="current-and-next-now p-2 pt-3 px-3 p-md-3 p-lg-4 " href="{{.Current.Url}}" title="View the show now playing">
    {{else}}
    <div class="current-and-next-now p-2 pt-3 px-3 p-md-3 p-lg-4">
    {{end}}
    <h2>Now</h2>
    {{template "current_next" .Current}}
    {{if .Current.Url}}
    </a>
    {{else}}
    </div>
    {{end}}
  </div>
  {{end}}
  {{if .Next}}
  <div class="col col-md-5 p-0 m-0">
    {{if .Next.Url}}
    <a class="current-and-next-next p-3 p-lg-4" href="{{.Next.Url}}" title="View the show next up">
    {{else}}
    <div class="current-and-next-next p-3 p-lg-4">
    {{end}}
    <h2>Next</h2>
    {{template "current_next" .Next}}
    {{if .Next.Url}}
    </a>
    {{else}}
    </div>
    {{end}}
  </div>
  {{end}}
  <div class="col-12 mobile-only p-0">
    <a href="https://ury.org.uk/listen" class="btn btn-lg btn-block btn-square btn-red listen-btn-mobile" title="Listen Live" onclick="window.open('http://ury.org.uk/live', 'radioplayer', 'height=665,width=380'); return false;">Listen Live</a>
  </div>
</div>
{{end}}
{{end}}

{{define "current_next"}}
{{if .Title}}
<h5 class="ellipsis">
  {{.Title}}
</h5>
<h6>{{.StartTime.Format "15:04"}} - {{.EndTime.Format "15:04"}}</h6>
{{else}}
<span>Looks like there is nothing coming up next yet.</span>
{{end}}
{{end}}
